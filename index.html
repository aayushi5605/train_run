<!DOCTYPE html>
<!--
    index.html - Home Page
    Main landing page with game overview, statistics, and navigation to other pages
    
    Page Structure:
    - Navigation Bar: Links to all main sections of the game
    - Hero Section: Game title and play button
    - Stats Section: Display of user statistics
    - Footer: Game information and user authentication status
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Train Run - Home</title>
    <!-- Main styles for all pages except game -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="home-page">
    <!-- Navigation Bar - Main menu for site navigation -->
    <nav>
        <ul>
            <li><a href="index.html" class="active">🏠 Home</a></li>
            <li><a href="game.html">🎮 Play Game</a></li>
            <li><a href="register.html">📝 Register</a></li>
            <li><a href="login.html">🔐 Login</a></li>
            <li><a href="rankings.html">🏆 Rankings</a></li>
        </ul>
    </nav>

    <!-- Hero Section - Main title and call-to-action -->
    <div class="hero">
        <h1>🚇 TRAIN RUN</h1>
        <p>Experience the Ultimate Endless Runner Adventure!</p>
        
        <div class="button-container">
            <a href="game.html" class="btn">🎮 PLAY NOW</a>
        </div>
    </div>

    <!-- Stats Container - Displays user statistics or global stats for guests -->
    <div class="stats-container">
        <!-- High Score Card - Shows personal best or global best -->
        <div class="stat-card">
            <div class="stat-icon">🏆</div>
            <div class="stat-value" id="high-score">0</div>
            <div class="stat-label">High Score</div>
        </div>
        
        <!-- Games Played Card - Shows total games played -->
        <div class="stat-card">
            <div class="stat-icon">🎮</div>
            <div class="stat-value" id="games-played">0</div>
            <div class="stat-label">Games Played</div>
        </div>
        
    </div>

    <!-- Footer - Game information and user authentication status -->
    <footer>
        <p>🎮 Train Run - WebGL Endless Runner Game</p>
        <p>Built with HTML, CSS, JavaScript, and JSON</p>
        <p id="user-info-footer"></p>
    </footer>

    <!-- Required JavaScript Libraries -->
    <script src="./js/storage.js"></script>
    <script src="./js/auth.js"></script>
    <!-- Page-specific JavaScript for stats and authentication -->
    <script>
        // Initialize page content and user stats when DOM is fully loaded
        window.addEventListener('DOMContentLoaded', () => {
            const currentUser = AuthManager.getCurrentUser();
            
            if (currentUser) {
                // Display logged-in user's stats
                document.getElementById('high-score').textContent = currentUser.highScore;
                document.getElementById('games-played').textContent = currentUser.gamesPlayed;
                
                // Show welcome message and logout link
                const footerInfo = document.getElementById('user-info-footer');
                footerInfo.innerHTML = `Welcome, <strong>${currentUser.username}</strong>! | <a href="#" onclick="logout(); return false;">Logout</a>`;
            } else {
                                // Display general stats
                const stats = StorageManager.getAllStats();
                document.getElementById('high-score').textContent = stats.highScore;
                document.getElementById('games-played').textContent = stats.gamesPlayed;
                
                // Show login prompt
                const footerInfo = document.getElementById('user-info-footer');
                footerInfo.innerHTML = `<a href="login.html">Login</a> or <a href="register.html">Register</a> to track your scores!`;
            }
        });
        
        function logout() {
            AuthManager.logout();
            window.location.reload();
        }
    </script>
</body>
</html>
